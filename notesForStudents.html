<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="modal.css" />
    <link rel="stylesheet" type="text/css" href="indexStyle.css" />
    <link href="https://fonts.googleapis.com/css?family=Comfortaa&display=swap" rel="stylesheet">
    <style>
      .comfort {
        font-family: 'Comfortaa', cursive;
        color: white;
      }
    </style>
    <title>Notes For Students</title>
  </head>
  <body id="theBody">
    <div id="classList">
      <!-- Trigger/Open The Modal -->
      <button id="addClass" class="newButton"><strong>Add Class</strong></button>
      <hr />
      <p id="noClassesErr" style="color: white; font-family: 'comfortaa', cursive; padding-left: 5px;">No classes have been added.</p>
    
    <!-- The Modal -->
    <div id="addClass_modal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <!-- <p>Some text in the Modal..</p> -->
        <div id="classInfo">
          
          <input type="text" id="subjectName" placeholder="Subject (Required)" title="Subject (required)" required />
          <hr />
          <input type="text" placeholder="Teacher" title="Teacher's name (optional)"/>
          <input type="submit" id="submitClass" onClick="subClass()" />
        
        </div>
      </div>
    </div>

    <script id="mainScript">
      // Get the modal
      var modal = document.getElementById("addClass_modal");

      // Get the button that opens the modal
      var btn = document.getElementById("addClass");

      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];

      var submitt = document.getElementById("submitClass");
      var subject = document.getElementById("subjectName");
      var subjectText = subject.value;
      // When the user clicks on the button, open the modal
      btn.onclick = function() {
        modal.style.display = "block";
      };

      // When the user clicks on <span> (x), close the modal
      span.onclick = function() {
        modal.style.display = "none";
      };

      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };
      /* Adds Element BEFORE NeighborElement */
      Element.prototype.appendBefore = function(element) {
        element.parentNode.insertBefore(this, element);
      }, false;

      /* Adds Element AFTER NeighborElement */
      Element.prototype.appendAfter = function(element) {
        element.parentNode.insertBefore(this, element.nextSibling);
      }, false;



      submitt.onclick = function() {
        modal.style.display = "none";
        var classes = document.getElementById("classList");
        var does_noClassesErr_Exist = !!document.getElementById("noClassesErr");
        console.log(does_noClassesErr_Exist);
        if (does_noClassesErr_Exist == true) {
          classes.removeChild(document.getElementById("noClassesErr"));
        }
        var newElem = document.createElement("button");
        newElem.setAttribute("class", "newButton");
        newElem.setAttribute("id", subject.value + "Button");
        newElem.innerText = subject.value
        classes.appendChild(newElem);
        var newScript = document.createElement("script");
        var txtNode = document.createTextNode("var " + subject.value + "Subject = document.getElementById(\"" + subject.value + "Button\");\n" + subject.value +"Subject.onclick = function() {\n\talert(\""+subject.value + "Button Clicked!\");\n}");
        newScript.appendChild(txtNode);       
        var body = document.getElementById("theBody");
        newScript.appendAfter(document.getElementById("mainScript"));
      }
    </script>
  </body>
</html>
